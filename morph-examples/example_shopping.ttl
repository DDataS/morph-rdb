@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix foaf: <http://xmlns.com/foaf/0.1#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix dc: <http://purl.org/dc/elements/1.1#> .
@prefix dc: <http://purl.org/stuff/rev#> .
@prefix rev: <http://purl.org/stuff/rev#> .
@prefix bsbm: <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/> .
@prefix bsbm-inst: <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/> .
@prefix ex: <http://example.com/> .

@base <http://mappingpedia.org/rdb2rdf/r2rml/tc/> .

<#TriplesMap1>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:tableName "place" 
	];

	rr:subjectMap [
		rr:template "http://example.com/place/{placeid}";
		rr:termType rr:IRI;
		rr:class <http://example.com/Place>;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Place#placeid>;
		rr:objectMap [ rr:column "placeid"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Place#planename>;
		rr:objectMap [ rr:column "planename"; rr:datatype xsd:string; ];
	].

<#TriplesMap2>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:tableName "product" 
	];

	rr:subjectMap [
		rr:template "http://example.com/product/{productid}";
		rr:termType rr:IRI;
		rr:class <http://example.com/Product>;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Product#productid>;
		rr:objectMap [ rr:column "productid"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Product#productname>;
		rr:objectMap [ rr:column "productname"; rr:datatype xsd:string; ];
	].

<#TriplesMap3>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:tableName "vendor" 
	];

	rr:subjectMap [
		rr:template "http://example.com/vendor/{vendorid}";
		rr:termType rr:IRI;
		rr:class <http://example.com/Vendor>;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Vendor#vendorid>;
		rr:objectMap [ rr:column "vendorid"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Vendor#vendorname>;
		rr:objectMap [ rr:column "vendorname"; rr:datatype xsd:string; ];
	].

<#TriplesMap4>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:tableName "offer1" 
	];

	rr:subjectMap [
		rr:template "http://example.com/offer1/{offerid}";
		rr:termType rr:IRI;
		rr:class <http://example.com/Offer1>;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer1#idplace>;
		rr:objectMap [ rr:column "idplace"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer1#idproduct>;
		rr:objectMap [ rr:column "idproduct"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer1#idvendor>;
		rr:objectMap [ rr:column "idvendor"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer1#price>;
		rr:objectMap [ rr:column "price"; rr:datatype xsd:integer; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer1#offerid>;
		rr:objectMap [ rr:column "offerid"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Place#ref-offer1>;
		rr:objectMap [
			rr:parentTriplesMap <#TriplesMap1>;
			rr:joinCondition [
				rr:child "idplace";
				rr:parent "placeid";
			];
		];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Product#ref-offer1>;
		rr:objectMap [
			rr:parentTriplesMap <#TriplesMap2>;
			rr:joinCondition [
				rr:child "idproduct";
				rr:parent "productid";
			];
		];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Vendor#ref-offer1>;
		rr:objectMap [
			rr:parentTriplesMap <#TriplesMap3>;
			rr:joinCondition [
				rr:child "idvendor";
				rr:parent "vendorid";
			];
		];
	].

<#TriplesMap5>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/PlaceHasProduct>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	];

	rr:predicateObjectMap [
		rr:predicate owl:inversoOf;
		rr:objectMap [ rr:constant <http://example.com/ProductBelongsToPlace> ];
	].

<#TriplesMap6>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT DISTINCT product.productid, place.placeid FROM (place JOIN offer1 ON ((place.placeid=offer1.idplace))) JOIN product ON ((product.productid=offer1.idproduct))" 
	];

	rr:subjectMap [
		rr:template "http://example.com/place/{placeid}";
		rr:termType rr:IRI;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/PlaceHasProduct>;
		rr:objectMap [ rr:template "http://example.com/product/{productid}" ];
	].

<#TriplesMap7>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/ProductBelongsToPlace>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	].

<#TriplesMap8>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/PlaceHasVendor>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate owl:inversoOf;
		rr:objectMap [ rr:constant <http://example.com/VendorBelongsToPlace> ];
	].

<#TriplesMap9>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT DISTINCT vendor.vendorid, place.placeid FROM (place JOIN offer1 ON ((place.placeid=offer1.idplace))) JOIN vendor ON ((vendor.vendorid=offer1.idvendor))" 
	];

	rr:subjectMap [
		rr:template "http://example.com/place/{placeid}";
		rr:termType rr:IRI;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/PlaceHasVendor>;
		rr:objectMap [ rr:template "http://example.com/vendor/{vendorid}" ];
	].

<#TriplesMap10>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/VendorBelongsToPlace>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	].

<#TriplesMap11>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/ProductHasVendor>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate owl:inversoOf;
		rr:objectMap [ rr:constant <http://example.com/VendorBelongsToProduct> ];
	].

<#TriplesMap12>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT DISTINCT vendor.vendorid, product.productid FROM (product JOIN offer1 ON ((product.productid=offer1.idproduct))) JOIN vendor ON ((vendor.vendorid=offer1.idvendor))" 
	];

	rr:subjectMap [
		rr:template "http://example.com/product/{productid}";
		rr:termType rr:IRI;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/ProductHasVendor>;
		rr:objectMap [ rr:template "http://example.com/vendor/{vendorid}" ];
	].

<#TriplesMap13>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/VendorBelongsToProduct>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	].

<#TriplesMap14>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:tableName "offer2" 
	];

	rr:subjectMap [
		rr:template "http://example.com/offer2/{idplace}/offer2/{idproduct}/offer2/{idvendor}";
		rr:termType rr:IRI;
		rr:class <http://example.com/Offer2>;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer2#price>;
		rr:objectMap [ rr:column "price"; rr:datatype xsd:integer; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer2#idplace>;
		rr:objectMap [ rr:column "idplace"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer2#idproduct>;
		rr:objectMap [ rr:column "idproduct"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Offer2#idvendor>;
		rr:objectMap [ rr:column "idvendor"; rr:datatype xsd:string; ];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Place#ref-offer2>;
		rr:objectMap [
			rr:parentTriplesMap <#TriplesMap1>;
			rr:joinCondition [
				rr:child "idplace";
				rr:parent "placeid";
			];
		];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Product#ref-offer2>;
		rr:objectMap [
			rr:parentTriplesMap <#TriplesMap2>;
			rr:joinCondition [
				rr:child "idproduct";
				rr:parent "productid";
			];
		];
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/Vendor#ref-offer2>;
		rr:objectMap [
			rr:parentTriplesMap <#TriplesMap3>;
			rr:joinCondition [
				rr:child "idvendor";
				rr:parent "vendorid";
			];
		];
	].

<#TriplesMap15>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/PlaceHasProduct>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	];

	rr:predicateObjectMap [
		rr:predicate owl:inversoOf;
		rr:objectMap [ rr:constant <http://example.com/ProductBelongsToPlace> ];
	].

<#TriplesMap16>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT DISTINCT product.productid, place.placeid FROM (place JOIN offer2 ON ((place.placeid=offer2.idplace))) JOIN product ON ((product.productid=offer2.idproduct))" 
	];

	rr:subjectMap [
		rr:template "http://example.com/place/{placeid}";
		rr:termType rr:IRI;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/PlaceHasProduct>;
		rr:objectMap [ rr:template "http://example.com/product/{productid}" ];
	].

<#TriplesMap17>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/ProductBelongsToPlace>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	].

<#TriplesMap18>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/PlaceHasVendor>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate owl:inversoOf;
		rr:objectMap [ rr:constant <http://example.com/VendorBelongsToPlace> ];
	].

<#TriplesMap19>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT DISTINCT vendor.vendorid, place.placeid FROM (place JOIN offer2 ON ((place.placeid=offer2.idplace))) JOIN vendor ON ((vendor.vendorid=offer2.idvendor))" 
	];

	rr:subjectMap [
		rr:template "http://example.com/place/{placeid}";
		rr:termType rr:IRI;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/PlaceHasVendor>;
		rr:objectMap [ rr:template "http://example.com/vendor/{vendorid}" ];
	].

<#TriplesMap20>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/VendorBelongsToPlace>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Place> ];
	].

<#TriplesMap21>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/ProductHasVendor>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate owl:inversoOf;
		rr:objectMap [ rr:constant <http://example.com/VendorBelongsToProduct> ];
	].

<#TriplesMap22>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT DISTINCT vendor.vendorid, product.productid FROM (product JOIN offer2 ON ((product.productid=offer2.idproduct))) JOIN vendor ON ((vendor.vendorid=offer2.idvendor))" 
	];

	rr:subjectMap [
		rr:template "http://example.com/product/{productid}";
		rr:termType rr:IRI;
	];

	rr:predicateObjectMap [
		rr:predicate <http://example.com/ProductHasVendor>;
		rr:objectMap [ rr:template "http://example.com/vendor/{vendorid}" ];
	].

<#TriplesMap23>
	a rr:TriplesMap;

	rr:logicalTable [ 
		rr:sqlQuery "SELECT 1 FROM INFORMATION_SCHEMA.TABLES LIMIT 1" 
	];

	rr:subjectMap [
		rr:constant <http://example.com/VendorBelongsToProduct>;
		rr:termType rr:IRI;
		rr:class owl:ObjectProperty;
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:domain;
		rr:objectMap [ rr:constant <http://example.com/Vendor> ];
	];

	rr:predicateObjectMap [
		rr:predicate rdfs:range;
		rr:objectMap [ rr:constant <http://example.com/Product> ];
	].

